<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>cgtfs: API (brief) overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">cgtfs
   &#160;<span id="projectnumber">0.3.1</span>
   </div>
   <div id="projectbrief">a C library to read static GTFS feeds</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">API (brief) overview </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><em>Please note: up to release <code>1.0.0</code>, the library's API is a subject to a change without backwards-compatibility concerns.</em></p>
<h1><a class="anchor" id="ApiOverview__Introduction"></a>
Basics</h1>
<p>The library tries to provide a semantic, consistent and readable interface. The following diagrams show the ways GTFS data can be parsed or transferred between different storage types using this library.</p>
<p><em>Note: <b>bold arrows</b> indicate that such a function exists in the API which makes it possible to transfer the entire contents of a feed between two types of storage with a single function call (not counting the setup and teardown functions).</em></p>
<div style="text-align: center;"> <div style="display: inline-block; width: 100%; max-width: 500px; padding-right: 5%;"> <div class="image">
<object type="image/svg+xml" data="df_straight.svg" width="100%">df_straight.svg</object>
<div class="caption">
Ways to parse/tranport data with CGTFS (simple diagram)</div></div>
 </div> <div style="display: inline-block; width: 100%; max-width: 400px;"> <div class="image">
<object type="image/svg+xml" data="df_scheme.svg" width="100%">df_scheme.svg</object>
<div class="caption">
Ways to parse/tranport data with CGTFS (scheme)</div></div>
 </div> </div><h2><a class="anchor" id="ApiOverview__Introduction__Terms"></a>
Terms</h2>
<p>The terms used throughout the library code and documentation differ from those defined by the <a href="https://developers.google.com/transit/gtfs/reference/#term-definitions">GTFS reference</a>. The following table illustrates the relation between differing CGTFS terms and reference terms, and their definitions, as well as terms used in the library and abscent from the reference.</p>
<table class="doxtable">
<tr>
<th>CGTFS term </th><th>Reference term </th><th>Meaning and notes  </th></tr>
<tr>
<td>Feed (entity/instance/object) </td><td><em>not defined</em> </td><td>A data structure holding the entirety of a feed's data. <em>In the code and documentation, may be referred to as a feed entity, feed instance or feed object.</em> </td></tr>
<tr>
<td>Directory </td><td>Dataset </td><td>A set of files which constitutes a GTFS feed. In some contexts, in the code documentation, terms <em>feed</em> and <em>directory</em> are interchangable. <em>Note: GTFS datasets are distributed in form of <code>*.zip</code> feed archives. This library, however, only works with unpacked feeds.</em> </td></tr>
<tr>
<td>Entity (instance) </td><td>Record </td><td>A complete data structure containing information about a concrete GTFS entity (e.g. information about one route). The library uses the term <em>entity</em> to avoid ambiguity with database operations. <em>Note: however, <em>entity</em> is a more abstract term, thus a struct holding one entity's data is, in essense, an entity instance. This documentation may refer to structs simply as <b>entities</b> for shortness</em>. </td></tr>
<tr>
<td>File </td><td><em>not defined</em> </td><td>A <code>*.txt</code> file, a part of the feed, holding information about all the feed's <em>entities</em> of a single type. </td></tr>
<tr>
<td>Database </td><td>n/a </td><td>A single <em>SQLite</em> database file, created using the supplied SQL schema (preferably, the creation of the database is left to the library, see the database section). </td></tr>
</table>
<h1><a class="anchor" id="ApiOverview__Structure"></a>
Structure</h1>
<p>The library's API is divided into two so called layers, additional auxiliary functionality and loosely related helpers:</p>
<ul>
<li><a class="el" href="a08855.html">Core layer</a> provides basic definitions and functions for handling GTFS feeds and entities, and includes:<ul>
<li><a class="el" href="a08859.html">feed object definition</a> to store data of an entire feed and functions for working with it:<ul>
<li>a function to initialize a feed object;</li>
<li>a function to parse a feed object from a given directory path;</li>
<li>a function to determine whether two feed objects are equal;</li>
</ul>
</li>
<li>field enumerations to represent types and values of the fields which can only take values from a limited set defined by the specification, e.g. <a href="https://developers.google.com/transit/gtfs/reference/#routestxt"><code>routes.txt/route type</code></a>;<ul>
<li>functions to parse field enumeration values from a char array;</li>
</ul>
</li>
<li><a class="el" href="a08861.html">entity definitions</a> to represent e.g. an agency, a stop, a shape, etc. and <a class="el" href="a08862.html">functions</a> for handling them;<ul>
<li>functions to initialize entity instances;</li>
<li>functions to parse entity instances from a char array of field names and a char array of field values;</li>
<li>functions to determine whether two entity instances are equal;</li>
</ul>
</li>
<li><a class="el" href="a08863.html">batch entity parsing functions</a> which parse an array of entities from a given <code>*.txt</code> file path;</li>
</ul>
</li>
<li><a class="el" href="a08856.html">Database layer</a> provides definitions and functions for working with entities defined in the <em>core layer</em> with/through/in a SQLite database instance, and includes:<ul>
<li><a class="el" href="a08877.html#a08889">definition of a connection to a sqlite database</a> and <a class="el" href="a08878.html">functions</a> for working with it:<ul>
<li>a function to initialize a database connection;</li>
<li>a function to free/close a database connection;</li>
<li>a function to setup a database at an opened connection for a GTFS feed;</li>
</ul>
</li>
<li>storage transition functions:<ul>
<li>a <a class="el" href="a08878.html#ga6ab599038ba2cf94a5458f1aeb2552ff">function</a> to store the contents of a feed from a specified directory into a specified database connection;</li>
<li>a <a class="el" href="a08878.html#ga27aa50456dd81eef62ce8e56c145187c">function</a> to fetch the contents of a feed from a specified database connection into a specicfied feed object;</li>
</ul>
</li>
<li>an <a class="el" href="a08877.html#ga45782c8787f0d20ee77ef2cccefb87d5">enumeration</a> of general database operation results (success / failure / so-so);</li>
<li><a class="el" href="a08879.html">functions</a> to store entities using a specified database connection;</li>
<li>the so-called table operations:<ul>
<li><a class="el" href="a08882.html">batch entity storing functions</a> which parse an array of entities from a given <code>*.txt</code> file path into a database table (doing so directly, without keeping an intermediate array in the memory);</li>
<li><a class="el" href="a08881.html">batch entity fetching functions</a> which retrieve an array of entities of a single type from a specified database connection;</li>
</ul>
</li>
</ul>
</li>
<li><a class="el" href="a08857.html">Utilities</a> include:<ul>
<li><a class="el" href="a08883.html">functions</a> for reading CSV files;</li>
<li>an assisting <a class="el" href="a08884.html">function</a> for clearing a c-string array;</li>
<li>utilitary <a class="el" href="a08885.html">functions</a> for working a with sqlite database;</li>
</ul>
</li>
<li><a class="el" href="a08858.html">Helpers</a> include:<ul>
<li>several preprocessor definitions used across the library;</li>
<li>a <a class="el" href="a08858.html#gae2bbdb842d112551febe520ce94152a4">function</a> for making a filepath from a directory and a file in it;</li>
<li>a <a class="el" href="a08858.html#gae324b27e0934fc7c9646721394e2f671">function</a> for converting degrees into radians;</li>
<li>a <a class="el" href="a08858.html#a08897">geolocation definition</a> which holds a latitude value and a longitude value;<ul>
<li>a <a class="el" href="a08858.html#gad13af620e788c2b1fcc6684fcbfd258e">function</a> for calculating a distance (in meters) between the two geolocation points.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>A more detailed documentation for each layer, definition and function can be found in the module documentation, linked throughout the list. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/>
<address class="footer">
  <small class="desc">
    cgtfs 0.3.1 &mdash; documentation generated by <span title="on Sun Jul 7 2019 23:07:44">Doxygen 1.8.13</span>
  </small>
  <small class="links">
    <a target="_blank" href="https://rakhack.github.io/cgtfs/" title="A pretty empty website \_(*^*)_/">Website</a>&mdash;
    <a target="_blank" href="https://github.com/rakhack/cgtfs" title="Main development platform & source code repository">GitHub</a>&mdash;
    <a target="_blank" href="https://raw.githubusercontent.com/rakhack/cgtfs/master/LICENSE" title="Library code">MIT License</a>&mdash;
    <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/" title="Documentation and related materials">CC BY 4.0</a>
  </small>
</address>
</body>
</html>
